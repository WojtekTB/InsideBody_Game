parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"robr":[function(require,module,exports) {
var define;
var t;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i,e){"function"==typeof t&&t.amd?t("p5.play",["p5"],function(t){e(t)}):e(i.p5)}(this,function(t){function e(i,e){Object.defineProperty(t.prototype,i,{configurable:!0,enumerable:!0,get:function(){var s=this instanceof t&&!this._isGlobal?this:window;return void 0===s._p5PlayProperties&&(s._p5PlayProperties={}),i in s._p5PlayProperties||(s._p5PlayProperties[i]=e.call(s)),s._p5PlayProperties[i]}})}function s(t){if("function"!=typeof t)throw new Error("constructor must be a function");return function(){var i=this;function e(){var e=Array.prototype.slice.call(arguments);return t.apply(this,[i].concat(e))}return e.prototype=t.prototype,e}}function o(t){return function(i){var e=t[i];if("function"!=typeof e)throw new Error('"'+i+'" is not a p5 method');return e.bind(t)}}t.prototype.registerMethod("init",function(){this.camera=new f(this,0,0,1),this.camera.init=!1});var n=t.prototype.abs,r=t.prototype.radians,h=t.prototype.dist,a=t.prototype.degrees,l=t.prototype.pow,c=t.prototype.round;e("allSprites",function(){return new t.prototype.Group}),t.prototype.spriteUpdate=!0,t.prototype.createSprite=function(t,i,e,s){var o=new u(this,t,i,e,s);return o.depth=this.allSprites.maxDepth()+1,this.allSprites.add(o),o},t.prototype.removeSprite=function(t){t.remove()},t.prototype.updateSprites=function(t){if(!1===t&&(this.spriteUpdate=!1),!0===t&&(this.spriteUpdate=!0),this.spriteUpdate)for(var i=0;i<this.allSprites.size();i++)this.allSprites.get(i).update()},t.prototype.getSprites=function(){if(0===arguments.length)return this.allSprites.toArray();for(var t=[],i=0;i<arguments.length;i++)for(var e=0;e<this.allSprites.size();e++)this.allSprites.get(e).isTagged(arguments[i])&&t.push(this.allSprites.get(e));return t},t.prototype.drawSprites=function(t){if("function"!=typeof(t=t||this.allSprites).draw)throw"Error: with drawSprites you can only draw all sprites or a group";t.draw()},t.prototype.drawSprite=function(t){t&&t.display()},t.prototype.loadAnimation=function(){return x(this.Animation,arguments)},t.prototype.loadSpriteSheet=function(){return x(this.SpriteSheet,arguments)},t.prototype.animation=function(t,i,e){t.draw(i,e)},e("_p5play",function(){return{keyStates:{},mouseStates:{}}});function u(i,e,s,f,d){var p=o(i),v=p("createVector"),_=p("color"),b=p("random"),S=p("print"),w=p("push"),A=p("pop"),P=p("colorMode"),I=p("noStroke"),M=p("rectMode"),E=p("ellipseMode"),T=p("imageMode"),D=p("translate"),O=p("scale"),C=p("rotate"),W=p("stroke"),N=p("strokeWeight"),Y=p("line"),F=p("noFill"),R=p("fill"),B=p("textAlign"),U=p("textSize"),H=p("text"),X=p("rect"),j=p("cos"),k=p("sin"),z=p("atan2"),L=i.quadTree,K=i.camera,G=t.prototype.RGB,q=t.prototype.CENTER,V=t.prototype.LEFT,Q=t.prototype.BOTTOM;this.position=v(e,s),this.previousPosition=v(e,s),this.newPosition=v(e,s),this.deltaX=0,this.deltaY=0,this.velocity=v(0,0),this.maxSpeed=-1,this.friction=0,this.collider=void 0,this.colliderType="none",this.touching={},this.touching.left=!1,this.touching.right=!1,this.touching.top=!1,this.touching.bottom=!1,this.mass=1,this.immovable=!1,this.restitution=1,Object.defineProperty(this,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this.rotateToDirection&&this.setSpeed(this.getSpeed(),t)}}),this._rotation=0,this.rotationSpeed=0,this.rotateToDirection=!1,this.depth=0,this.scale=1;var J=1,Z=1;this.visible=!0,this.mouseActive=!1,this.mouseIsOver=!1,this.mouseIsPressed=!1,this._internalWidth=f,this._internalHeight=d,Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return this._internalWidth},set:function(t){this._internalWidth=t}}),this.width=void 0===f?100:f,Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return this._internalHeight},set:function(t){this._internalHeight=t}}),this.height=void 0===d?100:d,this.originalWidth=this._internalWidth,this.originalHeight=this._internalHeight,this.removed=!1,this.life=-1,this.debug=!1,this.shapeColor=_(b(255),b(255),b(255)),this.groups=[];var $={},tt="";this.animation=void 0,this._syncAnimationSizes=function(){"default"===this.colliderType&&1!==$[tt].getWidth()&&1!==$[tt].getHeight()&&(this.collider=this.getBoundingBox(),this.colliderType="image",this._internalWidth=$[tt].getWidth()*n(this._getScaleX()),this._internalHeight=$[tt].getHeight()*n(this._getScaleY())),($[tt].frameChanged||void 0===this.width||void 0===this.height)&&(this._internalWidth=$[tt].getWidth()*n(this._getScaleX()),this._internalHeight=$[tt].getHeight()*n(this._getScaleY()))},this.update=function(){if(!this.removed){if(this.newPosition!==this.position?this.previousPosition=v(this.newPosition.x,this.newPosition.y):this.previousPosition=v(this.position.x,this.position.y),this.velocity.x*=1-this.friction,this.velocity.y*=1-this.friction,-1!==this.maxSpeed&&this.limitSpeed(this.maxSpeed),this.rotateToDirection&&this.velocity.mag()>0&&(this._rotation=this.getDirection()),this.rotation+=this.rotationSpeed,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.newPosition=v(this.position.x,this.position.y),this.deltaX=this.position.x-this.previousPosition.x,this.deltaY=this.position.y-this.previousPosition.y,$[tt]&&($[tt].update(),this._syncAnimationSizes()),this.collider){var t;if(this.collider instanceof y)t=i._angleMode===i.RADIANS?r(this.rotation):this.rotation,"custom"===this.colliderType?(this.collider.extents.x=this.collider.originalExtents.x*n(this._getScaleX())*n(j(t))+this.collider.originalExtents.y*n(this._getScaleY())*n(k(t)),this.collider.extents.y=this.collider.originalExtents.x*n(this._getScaleX())*n(k(t))+this.collider.originalExtents.y*n(this._getScaleY())*n(j(t))):"default"===this.colliderType?(this.collider.extents.x=this._internalWidth*n(this._getScaleX())*n(j(t))+this._internalHeight*n(this._getScaleY())*n(k(t)),this.collider.extents.y=this._internalWidth*n(this._getScaleX())*n(k(t))+this._internalHeight*n(this._getScaleY())*n(j(t))):"image"===this.colliderType&&(this.collider.extents.x=this._internalWidth*n(j(t))+this._internalHeight*n(k(t)),this.collider.extents.y=this._internalWidth*n(k(t))+this._internalHeight*n(j(t)));this.collider instanceof g&&(this.collider.radius=this.collider.originalRadius*n(this.scale))}this.mouseActive?(this.collider||this.setDefaultCollider(),this.mouseUpdate()):"function"!=typeof this.onMouseOver&&"function"!=typeof this.onMouseOut&&"function"!=typeof this.onMousePressed&&"function"!=typeof this.onMouseReleased||(this.mouseActive=!0,this.collider||this.setDefaultCollider(),this.mouseUpdate()),this.life>0&&this.life--,0===this.life&&this.remove()}},this.setDefaultCollider=function(){$[tt]&&1!==$[tt].getWidth()&&1!==$[tt].getHeight()?(this.collider=this.getBoundingBox(),this._internalWidth=$[tt].getWidth()*n(this._getScaleX()),this._internalHeight=$[tt].getHeight()*n(this._getScaleY()),this.colliderType="image"):$[tt]&&1===$[tt].getWidth()&&1===$[tt].getHeight()||(this.collider=new y(i,this.position,v(this._internalWidth,this._internalHeight)),this.colliderType="default"),i.quadTree.insert(this)},this.mouseUpdate=function(){var t,e=this.mouseIsOver,s=this.mouseIsPressed;this.mouseIsOver=!1,this.mouseIsPressed=!1,t=K.active?v(K.mouseX,K.mouseY):v(i.mouseX,i.mouseY),this.collider&&(this.collider instanceof g?h(t.x,t.y,this.collider.center.x,this.collider.center.y)<this.collider.radius&&(this.mouseIsOver=!0):this.collider instanceof y&&t.x>this.collider.left()&&t.y>this.collider.top()&&t.x<this.collider.right()&&t.y<this.collider.bottom()&&(this.mouseIsOver=!0),this.mouseIsOver&&i.mouseIsPressed&&(this.mouseIsPressed=!0),!e&&this.mouseIsOver&&void 0!==this.onMouseOver&&("function"==typeof this.onMouseOver?this.onMouseOver.call(this,this):S("Warning: onMouseOver should be a function")),e&&!this.mouseIsOver&&void 0!==this.onMouseOut&&("function"==typeof this.onMouseOut?this.onMouseOut.call(this,this):S("Warning: onMouseOut should be a function")),!s&&this.mouseIsPressed&&void 0!==this.onMousePressed&&("function"==typeof this.onMousePressed?this.onMousePressed.call(this,this):S("Warning: onMousePressed should be a function")),!s||i.mouseIsPressed||this.mouseIsPressed||void 0===this.onMouseReleased||("function"==typeof this.onMouseReleased?this.onMouseReleased.call(this,this):S("Warning: onMouseReleased should be a function")))},this.setCollider=function(t,e,s,o,n){if("rectangle"!==t&&"circle"!==t)throw new TypeError('setCollider expects the first argument to be either "circle" or "rectangle"');if("circle"===t&&arguments.length>1&&arguments.length<4)throw new TypeError('Usage: setCollider("circle") or setCollider("circle", offsetX, offsetY, radius)');if("circle"===t&&arguments.length>4)i._warn('Extra parameters to setCollider were ignored. Usage: setCollider("circle") or setCollider("circle", offsetX, offsetY, radius)');else{if("rectangle"===t&&arguments.length>1&&arguments.length<5)throw new TypeError('Usage: setCollider("rectangle") or setCollider("rectangle", offsetX, offsetY, width, height)');"rectangle"===t&&arguments.length>5&&i._warn('Extra parameters to setCollider were ignored. Usage: setCollider("rectangle") or setCollider("rectangle", offsetX, offsetY, width, height)')}this.colliderType="custom";var r=v(e,s);"rectangle"===t&&1===arguments.length?this.collider=new y(i,this.position,v(this.width,this.height)):"rectangle"===t&&arguments.length>=5?this.collider=new y(i,this.position,v(o,n),r):"circle"===t&&1===arguments.length?this.collider=new g(i,this.position,Math.floor(Math.max(this.width,this.height)/2)):"circle"===t&&arguments.length>=4&&(this.collider=new g(i,this.position,o,r)),L.insert(this)},this.getBoundingBox=function(){var t=$[tt].getWidth()*n(this._getScaleX()),e=$[tt].getHeight()*n(this._getScaleY());return new y(i,this.position,v(t,e))},this.mirrorX=function(t){if(1!==t&&-1!==t)return J;J=t},this.mirrorY=function(t){if(1!==t&&-1!==t)return Z;Z=t},this._getScaleX=function(){return this.scale},this._getScaleY=function(){return this.scale},this.display=function(){this.visible&&!this.removed&&(w(),P(G),I(),M(q),E(q),T(q),D(this.position.x,this.position.y),O(this._getScaleX()*J,this._getScaleY()*Z),i._angleMode===i.RADIANS?C(r(this.rotation)):C(this.rotation),this.draw(),A(),this.debug&&(w(),W(0,255,0),N(1),Y(this.position.x-10,this.position.y,this.position.x+10,this.position.y),Y(this.position.x,this.position.y-10,this.position.x,this.position.y+10),F(),I(),R(0,255,0),B(V,Q),U(16),H(this.depth+"",this.position.x+4,this.position.y-2),F(),W(0,255,0),void 0!==this.collider&&this.collider.draw(),A()))},this.draw=function(){""!==tt&&$?$[tt]&&$[tt].draw(0,0,0):(I(),R(this.shapeColor),X(0,0,this._internalWidth,this._internalHeight))},this.remove=function(){for(this.removed=!0,L.removeObject(this);this.groups.length>0;)this.groups[0].remove(this)},this.setVelocity=function(t,i){this.velocity.x=t,this.velocity.y=i},this.getSpeed=function(){return this.velocity.mag()},this.getDirection=function(){var t=z(this.velocity.y,this.velocity.x);return isNaN(t)&&(t=0),i._angleMode===i.RADIANS&&(t=a(t)),t},this.addToGroup=function(t){t instanceof Array?t.add(this):S("addToGroup error: "+t+" is not a group")},this.limitSpeed=function(t){var i=this.getSpeed();if(n(i)>t){var e=t/n(i);this.velocity.x*=e,this.velocity.y*=e}},this.setSpeed=function(t,e){var s;s=void 0===e?0!==this.velocity.x||0!==this.velocity.y?i.atan2(this.velocity.y,this.velocity.x):i._angleMode===i.RADIANS?r(this._rotation):this._rotation:i._angleMode===i.RADIANS?r(e):e,this.velocity.x=j(s)*t,this.velocity.y=k(s)*t},this.addSpeed=function(t,e){var s;s=i._angleMode===i.RADIANS?r(e):e,this.velocity.x+=j(s)*t,this.velocity.y+=k(s)*t},this.attractionPoint=function(t,i,e){var s=z(e-this.position.y,i-this.position.x);this.velocity.x+=j(s)*t,this.velocity.y+=k(s)*t},this.addImage=function(){if("string"==typeof arguments[0]&&arguments[1]instanceof t.Image)this.addAnimation(arguments[0],arguments[1]);else{if(!(arguments[0]instanceof t.Image))throw"addImage error: allowed usages are <image> or <label>, <image>";this.addAnimation("normal",arguments[0])}},this.addAnimation=function(t){var e;if("string"!=typeof t)return S("Sprite.addAnimation error: the first argument must be a label (String)"),-1;if(arguments.length<2)return S("addAnimation error: you must specify a label and n frame images"),-1;if(arguments[1]instanceof m){var s=arguments[1].clone();return $[t]=s,""===tt&&(tt=t,this.animation=s),s.isSpriteAnimation=!0,this._internalWidth=s.getWidth()*n(this._getScaleX()),this._internalHeight=s.getHeight()*n(this._getScaleY()),s}for(var o=[],r=1;r<arguments.length;r++)o.push(arguments[r]);return e=x(i.Animation,o),$[t]=e,""===tt&&(tt=t,this.animation=e),e.isSpriteAnimation=!0,this._internalWidth=e.getWidth()*n(this._getScaleX()),this._internalHeight=e.getHeight()*n(this._getScaleY()),e},this.changeImage=function(t){this.changeAnimation(t)},this.getAnimationLabel=function(){return tt},this.changeAnimation=function(t){$[t]?(tt=t,this.animation=$[t]):S("changeAnimation error: no animation labeled "+t)},this.overlapPixel=function(t,i){var e=v(t,i),s=this.animation.getFrameImage();return e.x-=this.position.x-s.width/2,e.y-=this.position.y-s.height/2,!(e.x<0||e.x>s.width||e.y<0||e.y>s.height)&&(0===this.rotation&&1===this.scale?255===s.get(e.x,e.y)[3]:(S("Error: overlapPixel doesn't work with scaled or rotated sprites yet"),!1))},this.overlapPoint=function(t,i){var e=v(t,i);if(this.collider||this.setDefaultCollider(),void 0!==this.collider){if(this.collider instanceof y)return e.x>this.collider.left()&&e.x<this.collider.right()&&e.y>this.collider.top()&&e.y<this.collider.bottom();if(this.collider instanceof g){var s=this.collider.radius*this.collider.radius;return l(this.collider.center.x-e.x,2)+l(this.collider.center.y-e.y,2)<s}return!1}return!1},this.overlap=function(t,i){return this.AABBops("overlap",t,i)},this.collide=function(t,i){return this.AABBops("collide",t,i)},this.displace=function(t,i){return this.AABBops("displace",t,i)},this.bounce=function(t,i){return this.AABBops("bounce",t,i)},this.AABBops=function(e,s,o){this.touching.left=!1,this.touching.right=!1,this.touching.top=!1,this.touching.bottom=!1;var r=!1,h=[];if(s instanceof u)h.push(s);else{if(!(s instanceof Array))throw"Error: overlap can only be checked between sprites or groups";void 0!==L&&L.active&&(h=L.retrieveFromGroup(this,s)),0===h.length&&(h=s)}for(var a=0;a<h.length;a++)if(this!==h[a]&&!this.removed){var l,f=h[a];if(void 0===this.collider&&this.setDefaultCollider(),void 0===f.collider&&f.setDefaultCollider(),void 0!==this.collider&&void 0!==f.collider)if("overlap"===e)(this.collider instanceof g?f.collider.overlap(this.collider):this.collider.overlap(f.collider))&&(r=!0,void 0!==o&&"function"==typeof o&&o.call(this,this,f));else if("collide"===e||"displace"===e||"bounce"===e){l=v(0,0);var d=n(this.velocity.x-f.velocity.x)>=f.collider.extents.x/2&&0===c(this.deltaX-this.velocity.x),p=n(this.velocity.y-f.velocity.y)>=f.collider.size().y/2&&0===c(this.deltaY-this.velocity.y);if(d||p){var m=v((this.position.x+this.previousPosition.x)/2,(this.position.y+this.previousPosition.y)/2),x=v(n(this.position.x-this.previousPosition.x)+this.collider.extents.x,n(this.position.y-this.previousPosition.y)+this.collider.extents.y);new y(i,m,x,this.collider.offset).overlap(f.collider)&&(d&&(this.velocity.x<0?l.x=f.collider.right()-this.collider.left()+1:this.velocity.x>0&&(l.x=f.collider.left()-this.collider.right()-1)),p&&(this.velocity.y>0?l.y=f.collider.top()-this.collider.bottom()-1:this.velocity.y<0&&(l.y=f.collider.bottom()-this.collider.top()+1)))}else l=this.collider instanceof g?f.collider.collide(this.collider).mult(-1):this.collider.collide(f.collider);if(0!==l.x||0!==l.y){var _,b,S,w;if("displace"!==e||f.immovable?"collide"!==e&&"bounce"!==e||this.immovable||(this.position.add(l),this.previousPosition=v(this.position.x,this.position.y),this.newPosition=v(this.position.x,this.position.y)):f.position.sub(l),l.x>0&&(this.touching.left=!0),l.x<0&&(this.touching.right=!0),l.y<0&&(this.touching.bottom=!0),l.y>0&&(this.touching.top=!0),"bounce"===e)if(this.collider instanceof g&&f.collider instanceof g){var A=t.Vector.sub(this.position,f.position),P=t.Vector.sub(f.position,this.position),I=A.magSq(),M=this.mass+f.mass,E=0,T=0;this.immovable?T=2:f.immovable?E=2:(E=2*f.mass/M,T=2*this.mass/M);var D=A.mult(E*t.Vector.sub(this.velocity,f.velocity).dot(A)/I),O=P.mult(T*t.Vector.sub(f.velocity,this.velocity).dot(P)/I);this.velocity.sub(D.mult(this.restitution)),f.velocity.sub(O.mult(f.restitution))}else f.immovable?(_=-this.velocity.x+f.velocity.x,b=-this.velocity.y+f.velocity.y):(_=(this.velocity.x*(this.mass-f.mass)+2*f.mass*f.velocity.x)/(this.mass+f.mass),b=(this.velocity.y*(this.mass-f.mass)+2*f.mass*f.velocity.y)/(this.mass+f.mass),S=(f.velocity.x*(f.mass-this.mass)+2*this.mass*this.velocity.x)/(this.mass+f.mass),w=(f.velocity.y*(f.mass-this.mass)+2*this.mass*this.velocity.y)/(this.mass+f.mass)),n(l.x)>n(l.y)&&(this.immovable||(this.velocity.x=_*this.restitution),f.immovable||(f.velocity.x=S*f.restitution)),n(l.x)<n(l.y)&&(this.immovable||(this.velocity.y=b*this.restitution),f.immovable||(f.velocity.y=w*f.restitution));void 0!==o&&"function"==typeof o&&o.call(this,this,f),r=!0}}}return r}}function f(t,i,e,s){this.position=t.createVector(i,e),this.zoom=s,this.mouseX=t.mouseX,this.mouseY=t.mouseY,this.active=!1,this.on=function(){this.active||(d.call(t),this.active=!0)},this.off=function(){this.active&&(p.call(t),this.active=!1)}}function d(){var t=this.camera;t.init||0!==t.position.x||0!==t.position.y||(t.position.x=this.width/2,t.position.y=this.height/2,t.init=!0),t.mouseX=this.mouseX+t.position.x-this.width/2,t.mouseY=this.mouseY+t.position.y-this.height/2,t.active||(t.active=!0,this.push(),this.scale(t.zoom),this.translate(-t.position.x+this.width/2/t.zoom,-t.position.y+this.height/2/t.zoom))}function p(){this.camera.active&&(this.pop(),this.camera.active=!1)}function g(i,e,s,r){var a=o(i)("createVector"),c=t.prototype.CENTER;this.center=e,this.radius=s,this.originalRadius=s,this.offset=void 0===r?a(0,0):r,this.extents=a(2*s,2*s),this.draw=function(){i.noFill(),i.stroke(0,255,0),i.rectMode(c),i.ellipse(this.center.x+this.offset.x,this.center.y+this.offset.y,2*this.radius,2*this.radius)},this.overlap=function(t){var i=this.radius+t.radius;i*=i;var e=this.center.x+this.offset.x,s=this.center.y+this.offset.y,o=t.center.x+t.offset.x,n=t.center.y+t.offset.y;return i>l(e-o,2)+l(s-n,2)},this.collide=function(t){if(this.overlap(t)){var e=this.center.x+this.offset.x,s=this.center.y+this.offset.y,o=t.center.x+t.offset.x,r=t.center.y+t.offset.y,l=i.atan2(s-r,e-o),c=this.radius+t.radius,u=n(c-h(e,s,o,r));return a(i.cos(l)*u,i.sin(l)*u)}return a(0,0)},this.size=function(){return a(2*this.radius,2*this.radius)},this.left=function(){return this.center.x+this.offset.x-this.radius},this.right=function(){return this.center.x+this.offset.x+this.radius},this.top=function(){return this.center.y+this.offset.y-this.radius},this.bottom=function(){return this.center.y+this.offset.y+this.radius}}function y(i,e,s,h){var a=o(i)("createVector"),l=t.prototype.CENTER,c=t.prototype.PI;this.center=e,this.extents=s,this.originalExtents=s.copy(),this.offset=void 0===h?a(0,0):h,this.min=function(){return a(this.center.x+this.offset.x-this.extents.x,this.center.y+this.offset.y-this.extents.y)},this.max=function(){return a(this.center.x+this.offset.x+this.extents.x,this.center.y+this.offset.y+this.extents.y)},this.right=function(){return this.center.x+this.offset.x+this.extents.x/2},this.left=function(){return this.center.x+this.offset.x-this.extents.x/2},this.top=function(){return this.center.y+this.offset.y-this.extents.y/2},this.bottom=function(){return this.center.y+this.offset.y+this.extents.y/2},this.size=function(){return a(2*this.extents.x,2*this.extents.y)},this.rotate=function(t){var e;e=i._angleMode===i.RADIANS?r(t):t;var s=this.extents.x*n(i.cos(e))+this.extents.y*n(i.sin(e)),o=this.extents.x*n(i.sin(e))+this.extents.y*n(i.cos(e));this.extents.x=s,this.extents.y=o},this.draw=function(){i.noFill(),i.stroke(0,255,0),i.rectMode(l),i.rect(this.center.x+this.offset.x,this.center.y+this.offset.y,this.size().x/2,this.size().y/2)},this.overlap=function(t){if(t instanceof y){var i=t.minkowskiDifference(this);return i.min().x<=0&&i.max().x>=0&&i.min().y<=0&&i.max().y>=0}if(t instanceof g){var e=a(t.center.x,t.center.y);return t.center.x<this.left()?e.x=this.left():t.center.x>this.right()&&(e.x=this.right()),t.center.y<this.top()?e.y=this.top():t.center.y>this.bottom()&&(e.y=this.bottom()),e.dist(t.center)<t.radius}},this.collide=function(t){if(t instanceof y){var e=t.minkowskiDifference(this);return e.min().x<=0&&e.max().x>=0&&e.min().y<=0&&e.max().y>=0?e.closestPointOnBoundsToPoint(a(0,0)):a(0,0)}if(t instanceof g){var s,o=a(t.center.x,t.center.y);if(t.center.x<this.left()?o.x=this.left():t.center.x>this.right()&&(o.x=this.right()),t.center.y<this.top()?o.y=this.top():t.center.y>this.bottom()&&(o.y=this.bottom()),o.dist(t.center)<t.radius){if(o.x===t.center.x&&o.y===t.center.y){var r=o.x-this.center.x,h=o.y-this.center.y;n(r)<n(h)?o.x=r>0?this.right():this.left():o.y=h<0?this.top():this.bottom(),0===(s=i.atan2(t.center.y-o.y,t.center.x-o.x))&&(o.x===this.right()&&(s=c),o.y===this.top()&&(s=c/2),o.y===this.bottom()&&(s=-c/2))}else s=i.atan2(o.y-t.center.y,o.x-t.center.x);var l=a(o.x-t.center.x,o.y-t.center.y);return a(i.cos(s)*t.radius-l.x,i.sin(s)*t.radius-l.y)}return a(0,0)}},this.minkowskiDifference=function(t){var e=this.min().sub(t.max()),s=this.size().add(t.size());return new y(i,e.add(s.div(2)),s.div(2))},this.closestPointOnBoundsToPoint=function(t){var i=n(t.x-this.min().x),e=a(this.min().x,t.y);return n(this.max().x-t.x)<i&&(i=n(this.max().x-t.x),e=a(this.max().x,t.y)),n(this.max().y-t.y)<i&&(i=n(this.max().y-t.y),e=a(t.x,this.max().y)),n(this.min().y-t.y)<i&&(i=n(this.min.y-t.y),e=a(t.x,this.min().y)),e}}function m(i){var e,s=Array.prototype.slice.call(arguments,1),o=t.prototype.CENTER;this.images=[];var n=0,h=0,a=-1;if(this.offX=0,this.offY=0,this.frameDelay=4,this.playing=!0,this.visible=!0,this.looping=!0,this.frameChanged=!1,this.imageCollider=!1,2===s.length&&"string"==typeof s[0]&&"string"==typeof s[1]){var l=s[0],c=s[1];if(".png"!==l.substring(l.length-4,l.length)&&(i.print("Animation error: you need to use .png files (filename "+l+")"),l=-1),".png"!==c.substring(c.length-4,c.length)&&(i.print("Animation error: you need to use .png files (filename "+c+")"),c=-1),-1!==l&&-1!==c){var u=0,f=0;for(e=l.length-5;e>=0;e--)l.charAt(e)>="0"&&l.charAt(e)<="9"&&u++;for(e=c.length-5;e>=0;e--)c.charAt(e)>="0"&&c.charAt(e)<="9"&&f++;var d,p=l.substring(0,l.length-(4+u)),g=c.substring(0,c.length-(4+f)),y=parseInt(l.substring(l.length-(4+u),l.length-4),10),x=parseInt(c.substring(c.length-(4+f),c.length-4),10);if(x<y){var _=x;x=y,y=_}if(p!==g)this.images.push(i.loadImage(l)),this.images.push(i.loadImage(c));else if(u===f)for(e=y;e<=x;e++)d=p+i.nf(e,u)+".png",this.images.push(i.loadImage(d));else for(e=y;e<=x;e++)d=p+e+".png",this.images.push(i.loadImage(d))}}else if(1===s.length&&s[0]instanceof v)this.spriteSheet=s[0],this.images=this.spriteSheet.frames;else if(0!==s.length)for(e=0;e<s.length;e++)s[e]instanceof t.Image?this.images.push(s[e]):this.images.push(i.loadImage(s[e]));this.clone=function(){var t=new m(i);return t.images=[],this.spriteSheet&&(t.spriteSheet=this.spriteSheet.clone()),t.images=this.images.slice(),t.offX=this.offX,t.offY=this.offY,t.frameDelay=this.frameDelay,t.playing=this.playing,t.looping=this.looping,t},this.draw=function(t,e,s){if(this.xpos=t,this.ypos=e,this.rotation=s||0,this.visible){if(this.isSpriteAnimation||this.update(),i.push(),i.imageMode(o),i.translate(this.xpos,this.ypos),i._angleMode===i.RADIANS?i.rotate(r(this.rotation)):i.rotate(this.rotation),void 0!==this.images[n])if(this.spriteSheet){var h=this.images[n].frame;i.image(this.spriteSheet.image,h.x,h.y,h.width,h.height,this.offX,this.offY,h.width,h.height)}else i.image(this.images[n],this.offX,this.offY);else i.print("Warning undefined frame "+n);i.pop()}},this.update=function(){h++;var t=n;this.frameChanged=!1,1===this.images.length&&(this.playing=!1,n=0),this.playing&&h%this.frameDelay==0&&(a>n&&-1!==a?n++:a<n&&-1!==a?n--:a===n&&-1!==a?this.playing=!1:this.looping?n>=this.images.length-1?n=0:n++:n<this.images.length-1&&n++),t!==n&&(this.frameChanged=!0)},this.play=function(){this.playing=!0,a=-1},this.stop=function(){this.playing=!1},this.rewind=function(){n=0},this.changeFrame=function(t){n=t<this.images.length?t:this.images.length-1,a=-1},this.nextFrame=function(){n<this.images.length-1?n+=1:this.looping&&(n=0),a=-1,this.playing=!1},this.previousFrame=function(){n>0?n-=1:this.looping&&(n=this.images.length-1),a=-1,this.playing=!1},this.goToFrame=function(t){t<0||t>=this.images.length||(a=t)!==n&&(this.playing=!0)},this.getFrame=function(){return n},this.getLastFrame=function(){return this.images.length-1},this.getFrameImage=function(){return this.images[n]},this.getImageAt=function(t){return this.images[t]},this.getWidth=function(){return this.images[n]instanceof t.Image?this.images[n].width:this.images[n]?this.images[n].frame.width:1},this.getHeight=function(){return this.images[n]instanceof t.Image?this.images[n].height:this.images[n]?this.images[n].frame.height:1}}function v(i){var e=Array.prototype.slice.call(arguments,1);this.image=null,this.frames=[],this.frame_width=0,this.frame_height=0,this.num_frames=0,this._generateSheetFrames=function(){for(var t=0,i=0,e=0;e<this.num_frames;e++)this.frames.push({name:e,frame:{x:t,y:i,width:this.frame_width,height:this.frame_height}}),(t+=this.frame_width)>=this.image.width&&(t=0,(i+=this.frame_height)>=this.image.height&&(i=0))},2===e.length&&Array.isArray(e[1])?(this.frames=e[1],this.num_frames=this.frames.length):4===e.length&&"number"==typeof e[1]&&"number"==typeof e[2]&&"number"==typeof e[3]&&(this.frame_width=e[1],this.frame_height=e[2],this.num_frames=e[3]),e[0]instanceof t.Image?(this.image=e[0],4===e.length&&this._generateSheetFrames()):2===e.length?this.image=i.loadImage(e[0]):4===e.length&&(this.image=i.loadImage(e[0],this._generateSheetFrames.bind(this))),this.drawFrame=function(t,e,s,o,n){var r;if("number"==typeof t)r=this.frames[t].frame;else for(var h=0;h<this.frames.length;h++)if(this.frames[h].name===t){r=this.frames[h].frame;break}var a=o||r.width,l=n||r.height;i.image(this.image,r.x,r.y,r.width,r.height,e,s,a,l)},this.clone=function(){for(var t=new v(i),e=0;e<this.frames.length;e++){var s=this.frames[e].frame,o={name:s.name,frame:{x:s.x,y:s.y,width:s.width,height:s.height}};t.frames.push(o)}return t.image=this.image,t.frame_width=this.frame_width,t.frame_height=this.frame_height,t.num_frames=this.num_frames,t}}function x(t,i){function e(){return t.apply(this,i)}return e.prototype=t.prototype,new e}function _(t,i,e,s){this.active=!0,this.max_objects=i||10,this.max_levels=e||4,this.level=s||0,this.bounds=t,this.objects=[],this.object_refs=[],this.nodes=[]}t.prototype.keyWentDown=function(t){return this._isKeyInState(t,1)},t.prototype.keyWentUp=function(t){return this._isKeyInState(t,3)},t.prototype.keyDown=function(t){return this._isKeyInState(t,2)},t.prototype._isKeyInState=function(t,i){var e,s=this._p5play.keyStates;return void 0===s[e="string"==typeof t?this._keyCodeFromAlias(t):t]&&(this.keyIsDown(e)?s[e]=2:s[e]=0),s[e]===i},t.prototype.mouseDown=function(t){return this._isMouseButtonInState(t,2)},t.prototype.mouseUp=function(t){return this._isMouseButtonInState(t,0)},t.prototype.mouseWentUp=function(t){return this._isMouseButtonInState(t,3)},t.prototype.mouseWentDown=function(t){return this._isMouseButtonInState(t,1)},t.prototype._isMouseButtonInState=function(t,i){var e=this._p5play.mouseStates;return void 0===t&&(t=this.LEFT),void 0===e[t]&&(this.mouseIsPressed&&this.mouseButton===t?e[t]=2:e[t]=0),e[t]===i},t.prototype.KEY={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32," ":32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,LEFT:37,UP_ARROW:38,UP:38,RIGHT_ARROW:39,RIGHT:39,DOWN_ARROW:40,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,"0NUMPAD":96,"1NUMPAD":97,"2NUMPAD":98,"3NUMPAD":99,"4NUMPAD":100,"5NUMPAD":101,"6NUMPAD":102,"7NUMPAD":103,"8NUMPAD":104,"9NUMPAD":105,MULTIPLY:106,PLUS:107,MINUS:109,DOT:110,SLASH1:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,EQUAL:187,COMMA:188,SLASH:191,BACKSLASH:220},t.prototype.KEY_DEPRECATIONS={MINUT:"MINUS",COMA:"COMMA"},t.prototype._keyCodeFromAlias=function(t){return t=t.toUpperCase(),this.KEY_DEPRECATIONS[t]&&(this._warn('Key literal "'+t+'" is deprecated and may be removed in a future version of p5.play. Please use "'+this.KEY_DEPRECATIONS[t]+'" instead.'),t=this.KEY_DEPRECATIONS[t]),this.KEY[t]},t.prototype.readPresses=function(){var t=this._p5play.keyStates,i=this._p5play.mouseStates;for(var e in t)this.keyIsDown(e)?0===t[e]?t[e]=1:t[e]=2:2===t[e]?t[e]=3:t[e]=0;for(var s in i)this.mouseIsPressed&&this.mouseButton===s?0===i[s]?i[s]=1:i[s]=2:2===i[s]?i[s]=3:i[s]=0},t.prototype.useQuadTree=function(t){return void 0!==this.quadTree&&(void 0===t?this.quadTree.active:void(this.quadTree.active=!!t))},e("quadTree",function(){return new _({x:0,y:0,width:0,height:0},4)}),e("Sprite",s(u)),e("Camera",s(f)),t.prototype.Group=function(){var t=[];function e(t,i,e){for(var s=!1,o=0;o<this.size();o++)s=this.get(o).AABBops(t,i,e)||s;return s}return t.get=function(i){return t[i]},t.contains=function(t){return this.indexOf(t)>-1},t.indexOf=function(e){for(var s=0,o=t.length;s<o;++s)if(n=e,r=t[s],null===n||null===r?null===n&&null===r:"string"==typeof n?n===r:"object"!==i(n)?n===r:n.equals instanceof Function?n.equals(r):n===r)return s;var n,r;return-1},t.add=function(i){if(!(i instanceof u))throw"Error: you can only add sprites to a group";-1===this.indexOf(i)&&(t.push(i),i.groups.push(this))},t.size=function(){return t.length},t.removeSprites=function(){for(;t.length>0;)t[0].remove()},t.clear=function(){t.length=0},t.remove=function(i){if(!(i instanceof u))throw"Error: you can only remove sprites from a group";var e,s=!1;for(e=t.length-1;e>=0;e--)t[e]===i&&(t.splice(e,1),s=!0);if(s)for(e=i.groups.length-1;e>=0;e--)i.groups[e]===this&&i.groups.splice(e,1);return s},t.toArray=function(){return t.slice(0)},t.maxDepth=function(){return 0===t.length?0:t.reduce(function(t,i){return Math.max(t,i.depth)},-1/0)},t.minDepth=function(){return 0===t.length?99999:t.reduce(function(t,i){return Math.min(t,i.depth)},1/0)},t.draw=function(){this.sort(function(t,i){return t.depth-i.depth});for(var t=0;t<this.size();t++)this.get(t).display()},t.overlap=e.bind(t,"overlap"),t.collide=e.bind(t,"collide"),t.displace=e.bind(t,"displace"),t.bounce=e.bind(t,"bounce"),t},e("CircleCollider",s(g)),e("AABB",s(y)),e("Animation",s(m)),e("SpriteSheet",s(v)),_.prototype.updateBounds=function(){for(var t=this.getAll(),i=1e4,e=1e4,s=-1e4,o=-1e4,n=0;n<t.length;n++)t[n].position.x<i&&(i=t[n].position.x),t[n].position.y<e&&(e=t[n].position.y),t[n].position.x>s&&(s=t[n].position.x),t[n].position.y>o&&(o=t[n].position.y);this.bounds={x:i,y:e,width:s,height:o}},_.prototype.split=function(){var t=this.level+1,i=Math.round(this.bounds.width/2),e=Math.round(this.bounds.height/2),s=Math.round(this.bounds.x),o=Math.round(this.bounds.y);this.nodes[0]=new _({x:s+i,y:o,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[1]=new _({x:s,y:o,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[2]=new _({x:s,y:o+e,width:i,height:e},this.max_objects,this.max_levels,t),this.nodes[3]=new _({x:s+i,y:o+e,width:i,height:e},this.max_objects,this.max_levels,t)},_.prototype.getIndex=function(t){if(t.collider){var i=-1,e=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.collider.top()<s&&t.collider.top()+t.collider.size().y<s,n=t.collider.top()>s;return t.collider.left()<e&&t.collider.left()+t.collider.size().x<e?o?i=1:n&&(i=2):t.collider.left()>e&&(o?i=0:n&&(i=3)),i}return-1},_.prototype.insert=function(t){if(-1===this.objects.indexOf(t)){var i,e=0;if(void 0!==this.nodes[0]&&-1!==(i=this.getIndex(t)))return void this.nodes[i].insert(t);if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels)for(void 0===this.nodes[0]&&this.split();e<this.objects.length;)-1!==(i=this.getIndex(this.objects[e]))?this.nodes[i].insert(this.objects.splice(e,1)[0]):e+=1}},_.prototype.retrieve=function(t){var i=this.getIndex(t),e=this.objects;if(void 0!==this.nodes[0])if(-1!==i)e=e.concat(this.nodes[i].retrieve(t));else for(var s=0;s<this.nodes.length;s+=1)e=e.concat(this.nodes[s].retrieve(t));return e},_.prototype.retrieveFromGroup=function(t,i){for(var e=[],s=this.retrieve(t),o=0;o<s.length;o++)i.contains(s[o])&&e.push(s[o]);return e},_.prototype.getAll=function(){for(var t=this.objects,i=0;i<this.nodes.length;i+=1)t=t.concat(this.nodes[i].getAll());return t},_.prototype.getObjectNode=function(t){var i;if(!this.nodes.length)return this;if(-1===(i=this.getIndex(t)))return this;var e=this.nodes[i].getObjectNode(t);return e||!1},_.prototype.removeObject=function(t){var i=this.getObjectNode(t),e=i.objects.indexOf(t);if(-1===e)return!1;i.objects.splice(e,1)},_.prototype.clear=function(){if(this.objects=[],this.nodes.length){for(var t=0;t<this.nodes.length;t+=1)this.nodes[t].clear();this.nodes=[]}},_.prototype.cleanup=function(){var t=this.getAll();this.clear();for(var i=0;i<t.length;i++)this.insert(t[i])},t.prototype.registerMethod("pre",t.prototype.readPresses),t.prototype.registerMethod("pre",t.prototype.updateSprites),t.prototype.registerMethod("post",function(){this.quadTree.active&&(this.quadTree.updateBounds(),this.quadTree.cleanup())}),t.prototype.registerMethod("pre",d),t.prototype.registerMethod("post",p),t.prototype._warn=function(t){var i=window.console;i&&("function"==typeof i.warn?i.warn(t):"function"==typeof i.log&&i.log("Warning: "+t))}});
},{}]},{},["robr"], null)
//# sourceMappingURL=/p5.play.fa39aca3.js.map